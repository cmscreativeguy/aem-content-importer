<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE concept PUBLIC "-//OASIS//DTD DITA Concept//EN" "concept.dtd"[]>
<concept id="concept_226AD0C4EC4141D5A78E80BA8FA4198E">
  <title>User Activity Logging</title>
  <shortdesc>To successfully target a user, Target records as many of the
	 visited URLs as possible. This implies that, for each request the user makes,
	 regardless of the campaign type, the URL is logged in the user profile. 
  </shortdesc>
  <prolog>
    <metadata>
      <othermeta name="solution" content="Target" />
      <othermeta name="topic" content="Advanced" />
    </metadata>
  </prolog>
  <conbody>
    <p>URLs are logged to monitor the overall user activity on the site, not
		only on the pages which are part of 1:1 campaigns. 
	 </p>
    <p>Memory footprint is critical when tracking user activity on edge nodes.
		The URL string format is quite costly, and can be from 10 to more than one
		hundred bytes large. Also, the user base is continually growing, making it more
		optimal to log only the hash values. 
	 </p>
    <p>Because a user can visit the client's site several times and change her
		interests during a period of time, it is important to distinguish between the
		URLs visited in different sessions. The most recent sessions are probably more
		predictive of her interests, and are thus more valuable than the previous
		sessions. 
	 </p>
    <p>The hashing algorithm lowercases the URLs and drops any query
		parameters. For example, each of the following URLs has the same hash: 
	 </p>
    <p>
      <ul id="ul_D8228C969581490A88C9095252EDE156">
        <li id="li_5926C5BFBB5648CB87FE14B2E0F2B84B">
          <p> https://www.bigbank.com/PersonalBanking 
		  </p>
        </li>
        <li id="li_A23A8B7893B44C828D6044DA399AFE09">
          <p> https://www.bigbank.com/personalbanking 
		  </p>
        </li>
        <li id="li_5CFE778443B04BE8946E8DD660C4560F">
          <p> https://www.bigbank.com/PersonalBanking?sessionId=1214455 
		  </p>
        </li>
      </ul>
    </p>
    <p>The memory footprint constrains the amount of data that can be logged in
		the user profile. To avoid over-consumption, the number of URL hashes per
		profile is limited to 100. When the user exceeds the limit, the six oldest
		values are deleted to free space for new hashes. The most recent records are
		always kept. An average session has about five requests, so six new slots are
		sufficient in most cases. (One slot is reserved for session demarcation.) 
	 </p>
  </conbody>
</concept>