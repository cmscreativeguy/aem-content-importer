<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE concept PUBLIC "-//OASIS//DTD DITA Concept//EN" "concept.dtd"[]>
<concept id="concept_E8529366678F4F95804C91AA5B23F9BE">
  <title>Processing Rules Tips &amp; Tricks</title>
  <shortdesc>This section contains guidelines for testing processing rules and
	 a list of common mistakes to avoid. 
  </shortdesc>
  <prolog>
    <metadata>
      <othermeta name="solution" content="Analytics" />
      <othermeta name="topic" content="Admin tools" />
      <othermeta name="subtopic" content="Processing rules" />
    </metadata>
  </prolog>
  <conbody>
    <ul id="ul_87E109AEA0CA48C2840DD5040C1E0352">
      <li id="li_A2BF308A4735414CAEEC21DFC7C916E3">
        <xref href="processing_rules_tips.xml#concept_E8529366678F4F95804C91AA5B23F9BE/section_F092D2FECDE24082AE9FC6F8BE87F29F" format="dita" scope="local">
          <?xm-replace_text Testing Processing Rules?>
        </xref>
      </li>
      <li id="li_9A9A477DAC2C448EB3C5421A00A05CEA">
        <xref href="processing_rules_tips.xml#concept_E8529366678F4F95804C91AA5B23F9BE/section_EE84A5525E26415787930723B0CAAE0F" format="dita" scope="local">
          <?xm-replace_text Check for Empty Values?>
        </xref>
      </li>
      <li id="li_BC5A6521EFBF4330A1FB079A199DB2CD">
        <xref href="processing_rules_tips.xml#concept_E8529366678F4F95804C91AA5B23F9BE/section_49FCCA31E31A433EA2EF5EAF91443DAF" format="dita" scope="local">
          <?xm-replace_text Avoid Overwriting Values?>
        </xref>
      </li>
      <li id="li_8C605BB5750F481F81BC32ED7C6126DC">
        <xref href="processing_rules_tips.xml#concept_E8529366678F4F95804C91AA5B23F9BE/section_3BBBE1FB8FEA48589362452DE51DB575" format="dita" scope="local">
          <?xm-replace_text Encode Search Terms to UTF-8 or Unicode?>
        </xref>
      </li>
      <li id="li_C53CB2F906F34E4DB829697C380B4640">
        <xref href="processing_rules_tips.xml#concept_E8529366678F4F95804C91AA5B23F9BE/section_80CE853244FC435B844A09EA51868D8D" format="dita" scope="local">
          <?xm-replace_text Starts With, Contains, and Ends With?>
        </xref>
      </li>
    </ul>
    <section id="section_F092D2FECDE24082AE9FC6F8BE87F29F">
      <title>Testing Processing Rules</title>
      <p>This section contains some guidelines to help test processing rules
		  before they are deployed to production. 
		</p>
      <p>
        <b>Testing Rules That Read Search Terms</b>
      </p>
      <p>For any criteria based on a search, such as if prop1 contains “news,”
		  go to the prop 1 report and search for “news” and see if there are any matches
		  you were not expecting. 
		</p>
      <p>
        <b>Testing Rules that Read Variables</b>
      </p>
      <p>Create a blank HTML page on your desktop, include the s_code from your
		  site, and set the s_account variable to a dev report suite. If your rules are
		  based on referrer, referring domain, and so on, take some sample URLs from the
		  live referrers report, set the 
		  <codeph>s.referrer</codeph> variable with one of those values and load
		  the page. Likewise, if the rule is based on the page URL value, you can set 
		  <codeph>s.pageURL</codeph>. This same process can be used for any
		  variables. 
		</p>
      <p>
        <b>Using a Dev Report Suite</b>
      </p>
      <p>We recommend configuring processing rules on a dev report suite to
		  make sure they’re working correctly. If possible, we recommend copying the
		  rules to a small production report suite before broad deployment. 
		</p>
    </section>
    <section id="section_EE84A5525E26415787930723B0CAAE0F">
      <title>Check for Empty Values</title>
      <p>When you create a rule, consider the case when a value is empty. If
		  you do not add a condition that checks for an empty value you can
		  unintentionally overwrite variables with empty values. 
		</p>
      <p>
        <image href="graphics/tips-set-value-acquisition-code.png" id="image_E3B021CAA2944C708EF70FFD2B55DB44">
          <?xm-replace_text Paragraph?>
        </image>
      </p>
      <p>It is also important to consider the processing order. In the
		  following example, it appears that the Previous Pagename custom evar will be
		  set to the URL if the Page Name is not present. However, the URL is placed into
		  the page name after processing rules are applied, so in this case, the Page
		  Name is empty if it is not set on the page. 
		</p>
      <p>
        <image href="graphics/tips-copy-page-name-to-evar.png" id="image_C94CB88817974E94A046CDBDDA8EF635">
          <?xm-replace_text Paragraph?>
        </image>
      </p>
    </section>
    <section id="section_49FCCA31E31A433EA2EF5EAF91443DAF">
      <title>Avoid Overwriting Values</title>
      <p> In the following example, two context data variables are used on the
		  site to capture search terms: search_keyword and search_term. However, based on
		  the configuration, the search_keyword value is always overwritten, even if
		  search_term is empty. 
		</p>
      <p>This rule should be reconfigured to test each context data variable
		  for a value before populating the Internal Search Term, and optionally,
		  concatenating the two values if there is a use case for keeping them both. 
		</p>
      <p>
        <image href="graphics/tips-search-keyword.png" id="image_1C859227AAA2430CA232421D05F3BA67">
          <?xm-replace_text Paragraph?>
        </image>
      </p>
    </section>
    <section id="section_3BBBE1FB8FEA48589362452DE51DB575">
      <title>Encode Search Terms to UTF-8 or Unicode</title>
      <p>Search terms pulled from a query string must be encoded correctly or
		  they won't be matched by processing rules. 
		</p>
      <p>
        <image href="graphics/tips-multibyte.png" id="image_2D18B7DD4F154A99B1E75CFC29D70E2E">
          <?xm-replace_text Paragraph?>
        </image>
      </p>
    </section>
    <section id="section_80CE853244FC435B844A09EA51868D8D">
      <title>Starts With, Contains, and Ends With</title>
      <p>Select the correct matching condition to find the most restrictive
		  condition that matches correctly. You can search for values in a report before
		  creating a rule to make sure there are no unintended matches. For example, you
		  should search the Prop2 report to find all locations where this condition
		  matches before enabling this rule. 
		</p>
      <p>
        <image href="graphics/tips-startswith.png" id="image_4FB059E1B87D4983900F45D91E8436BF">
          <?xm-replace_text Paragraph?>
        </image>
      </p>
    </section>
  </conbody>
</concept>