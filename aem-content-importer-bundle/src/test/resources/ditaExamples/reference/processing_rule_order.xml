<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE concept PUBLIC "-//OASIS//DTD DITA Concept//EN" "concept.dtd">
<concept id="concept_8A6BBEA7F50C40C8A8D8755D4F579B1E"> 
  <title>Processing Order</title> 
  <shortdesc>To effectively use processing rules it is essential to understand
	 when they are applied during data collection. 
  </shortdesc> 
  <prolog> 
	 <metadata> 
		<othermeta name="solution" content="Analytics"/> 
		<othermeta name="topic" content="Admin tools"/> 
		<othermeta name="subtopic" content="Processing rules"/> </metadata>
  </prolog> 
  <conbody> 
	 <p>Adobe Analytics processes data in the following order: 
	 </p> 
	 <p> 
		<image placement="break" align="center"
		 href="graphics/analytics_processing_order.png"
		 id="image_484BD8E471B945E597FD439D6F34F71E"></image>
	 </p> 
	 <p>The following tables list the data that is typically available before
		and after processing rules are applied: 
	 </p> 
	 <table id="table_AB9ED388FC3348CAAF240F6A734EE188"> 
	 <title>Before Processing Rules</title> 
	 <tgroup cols="2"> 
		<colspec colnum="1" colname="col1" colwidth="*"/> 
		<colspec colnum="2" colname="col2" colwidth="*"/> 
		<thead> 
		  <row> 
			 <entry colname="col1"> 
				<p>Dimension 
				</p> 
			 </entry> 
			 <entry colname="col2"> 
				<p>Description 
				</p> 
			 </entry> 
		  </row> 
		</thead> 
		<tbody> 
		  <row> 
			 <entry colname="col1"> 
				<p>Dynamic variable lookup 
				</p> 
			 </entry> 
			 <entry colname="col2"> 
				<p>Variables are populated dynamically by pulling information from
				  HTTP headers or other variables. For example, s.eVar5="D=c1" will put the value
				  of prop1 into eVar5. 
				</p> 
			 </entry> 
		  </row> 
		  <row> 
			 <entry colname="col1"> 
				<p> AppMeasurement 
				</p> 
			 </entry> 
			 <entry colname="col2"> 
				<p>Functions and plugins used in AppMeasurement are executed in the
				  browser or client application. 
				</p> 
			 </entry> 
		  </row>
		  <row>
			 <entry colname="col1">
				<p>Dynamic Tag Management
				</p>
			 </entry>
			 <entry colname="col2">
				<p>Rules defined in Dynamic Tag Management are executed as defined.
				</p>
			 </entry>
		  </row> 
		</tbody> 
	 </tgroup> 
	 </table> 
	 <table id="table_3E7936FC9C63442587A624B42F8ABF0D"> 
	 <title>After Processing Rules</title> 
	 <tgroup cols="2"> 
		<colspec colnum="1" colname="col1" colwidth="1.00*"/> 
		<colspec colnum="2" colname="col2" colwidth="1.46*"/> 
		<thead> 
		  <row> 
			 <entry colname="col1"> 
				<p>Dimension 
				</p> 
			 </entry> 
			 <entry colname="col2"> 
				<p>Description 
				</p> 
			 </entry> 
		  </row> 
		</thead> 
		<tbody> 
		  <row> 
			 <entry colname="col1"> 
				<p>Data added by VISTA 
				</p> 
			 </entry> 
			 <entry colname="col2"> 
				<p>Processing rules are applied before VISTA. 
				</p> 
			 </entry> 
		  </row> 
		  <row> 
			 <entry colname="col1"> 
				<p>Visit page number 
				</p> 
			 </entry> 
			 <entry colname="col2"> 
				<p>As a general rule, processing rules are aware of the data that
				  is contained in the current hit only. Visit page number is compiled after
				  processing rules are applied. 
				</p> 
			 </entry> 
		  </row> 
		  <row> 
			 <entry colname="col1"> 
				<p>Clean URL is added as page name if it is not set 
				</p> 
			 </entry> 
			 <entry colname="col2"> 
				<p>After processing rules and VISTA are applied, the clean URL is
				  added as the page name if there is no page name set. Since this occurs after
				  processing rules are applied, we recommend adding a condition to check if the
				  page name is blank. 
				</p> 
				<p>If you run the 
				  <uicontrol>Site Content</uicontrol> &gt; 
				  <uicontrol>Pages Report</uicontrol> and you see 
				  <codeph>http://</codeph> values for page names, it is likely the
				  page name is blank and the URL is being used. 
				</p> 
				<p>You can set up a condition to test for a blank page name, or to
				  test to see if the page name or the page URL contains a specific value. The
				  page name can then be set as needed. 
				</p> 
			 </entry> 
		  </row> 
		  <row> 
			 <entry colname="col1"> 
				<p>Marketing Channel Processing Rules 
				</p> 
			 </entry> 
			 <entry colname="col2"> 
				<p>You can use processing rules to prepare data for processing by 
				  <xref
					href="http://marketing.adobe.com/resources/help/en_US/mchannel/index.html?f=c_rules"
					format="http" scope="external">Marketing Channel Processing Rules</xref>. 
				</p> 
			 </entry> 
		  </row> 
		  <row> 
			 <entry colname="col1"> 
				<p>GEO lookup 
				</p> 
			 </entry> 
			 <entry colname="col2"> 
				<p>This includes the Visitor State and Visitor ZIP/Postal code
				  values. 
				</p> 
			 </entry> 
		  </row> 
		  <row> 
			 <entry colname="col1"> 
				<p>eVars persistence 
				</p> 
			 </entry> 
			 <entry colname="col2"> 
				<p>eVars that were contained in a previous hit are not persisted to
				  each hit during rule processing. Only eVars that are set on the current hit
				  being processed are available. 
				</p> 
			 </entry> 
		  </row> 
		</tbody> 
	 </tgroup> 
	 </table> 
	 <section id="section_576EE8C240A24CBA979BD614E8D5338D"> 
		<title>How Processing Rules are Applied when Copying Hits using
		  VISTA</title> 
		<p>If you have a VISTA rule configured to copy hits to another report
		  suite, the hits are sent though any processing rules defined on the other
		  report suite. 
		</p> 
		<p>If you have processing rules defined on the original report suite,
		  these may or may not be applied based on how the VISTA rule was configured by
		  Engineering Services. To find out, you can ask your implementation specialist
		  if the VISTA rule copies the "pre" or the "post" values to the additional
		  report suite. If the "pre" value is copied, processing rules defined on the
		  original report suite are not applied. If the "post" value is copied,
		  processing rules are applied before the hit is copied. 
		</p> 
	 </section> 
  </conbody> 
</concept>
