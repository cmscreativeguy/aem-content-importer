<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE concept PUBLIC "-//OASIS//DTD DITA Concept//EN" "concept.dtd"[]>
<concept id="concept_0AF92491E8274BF69E66DB36E5F54A0F">
  <title>Transaction ID and Visitor Profiles</title>
  <shortdesc>
    <?xm-replace_text Short Description?>
  </shortdesc>
  <prolog>
    <metadata>
      <othermeta name="solution" content="Analytics" />
      <othermeta name="topic" content="Developer and implementation" />
    </metadata>
  </prolog>
  <conbody>
    <p>This section contains important information regarding the data from the
		visitor profile that is used when uploading data using a transaction ID. 
	 </p>
    <section id="section_B248FA93ECC84F6290D237EB83618070">
      <title>Transaction ID</title>
      <p>When a transaction ID is recorded, a "snapshot" of the current visitor
		  profile is saved and associated with the transaction ID. This "snapshot"
		  contains all variable values that are currently set for the visitor, including
		  persisting variables (such as eVars and campaigns). Values in this snapshot
		  receive attribution for success events, purchase events, and revenue later
		  uploaded using this same transaction ID. 
		</p>
      <p>After the visitor profile "snapshot" is created, it is not updated
		  when the current visitor profile changes (due to online behavior), it is
		  updated only with data that is uploaded using transaction ID data sources. If
		  you set the same transaction ID value on multiple pages during the same visit,
		  the data source upload that takes place later will be tied to the "snapshot"
		  that was created the first time the ID was set. 
		</p>
      <p>
        <b>Multiple Uploads</b>
      </p>
      <p>Multiple rows of data can be uploaded to the same transaction ID
		  throughout the transaction ID expiration window (see below). 
		</p>
      <p>
        <b>Variable Expiration</b>
      </p>
      <p>Variable expiration is not considered for the purposes of transaction
		  IDs, because the associated visitor profile data is intended to reflect the
		  visitor state at the time of the transaction. For example, if eVar1 is
		  configured to expire after visit, the value in the visitor profile "snapshot"
		  receives credit even if the value has expired or has been replaced in the
		  current visitor profile when transaction ID data is uploaded. 
		</p>
      <p>
        <b>Products</b>
      </p>
      <p>Product information (from 
		  <codeph>s.products</codeph>) is not contained in the visitor profile
		  "snapshot", so you must upload any associated product data in the data source
		  file along with the transaction ID. Note that you can specify only one product
		  per row, so you might need to upload multiple rows with the same transaction ID
		  to include all products. 
		</p>
      <p>
        <b>Uploaded eVar Persistence</b>
      </p>
      <p>eVars uploaded using transaction ID data sources are added to the
		  visitor profile "snapshot", they are not added to the current visitor profile
		  or virtual cookie. This means that online behavior that happens after the
		  upload is not credited to uploaded eVars, since these values are not part of
		  the current visitor profile. 
		</p>
      <!--tID rows count against metrics now, but I’ve got to come up with the list. We have removed those data from all “derived” metrics, such as bounces, visits, visitors, entries, exits, etc., while keeping them included in event-based metrics. I don’t have a final list, but I’ll try to create one with Jacob.-->
      <p>
        <b>Transaction ID Expiration Window</b>
      </p>
      <p>The visitor profile "snapshot" associated with a transaction ID is
		  eligible for deletion after 90 days, though the actual deletion schedule
		  varies. If required, you can contact Adobe to have the expiration window
		  lengthened to up to 2 years. If a row is uploaded after the transaction ID
		  expiration window, the data in the row is recorded, but none of the data in the
		  visitor profile "snapshot" will be credited if the profile has been deleted. 
		</p>
    </section>
    <section id="section_A4D39291200A42C496122FDB9EF6EF68">
      <title>Breakdowns and Segmentation Using Transaction IDs</title>
      <p>eVars uploaded using data sources can be used to breakdown eVars that
		  are contained in the "snapshot" of the visitor profile. Since this data is
		  separate from the current visitor profile, you cannot breakdown by other eVars
		  that might have been set before or after the transaction ID was set but are not
		  part of the "snapshot". 
		</p>
      <p>There are a few ways to view associated visitor data that might not be
		  available in a breakdown. In data warehouse reports, you can view transaction
		  ID data with a visitor ID that matches the other hits from the visitor. While
		  these transaction ID rows are excluded when counting visits/visitors per day,
		  they are used in calculating most metrics and in segments. 
		</p>
      <p>As a result, you can build a segment of visitors who perform some
		  offline event that was uploaded using transaction ID data sources. That will
		  return everything the visitor did before and after the transaction ID event. 
		</p>
      <p>Likewise, visitor participation allows you to see how transaction ID
		  props and eVars preceded an online event, or how online props and eVars
		  preceded a transaction ID event. 
		</p>
    </section>
  </conbody>
</concept>