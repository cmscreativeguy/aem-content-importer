<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE concept PUBLIC "-//OASIS//DTD DITA Concept//EN" "concept.dtd">
<concept id="concept_CE78750AC2A4487D8ACD9369B3EAC85A"> 
  <title>JavaScript Implementation</title> 
  <shortdesc> To begin using Analytics, data must be sent to a report suite to
	 display in reporting. The easiest and most common way to send data to 
	 <keyword>Analytics</keyword> is by using JavaScript implementation. 
  </shortdesc> 
  <prolog> 
	 <metadata> 
		<othermeta name="solution" content="Analytics"/> 
		<othermeta name="topic" content="Developer and implementation"/>
		</metadata>
  </prolog> 
  <conbody> 
	 <note>This section describes the legacy method of implementing Analytics.
		All Analytics customers have access to 
		<xref href="https://marketing.adobe.com/resources/help/en_US/dtm/"
		 format="https" scope="external">Dynamic Tag Management</xref> which is the
		standard method to deploy Marketing Cloud tags. 
	 </note> 
	 <section id="section_04147F6EA34E493EB6C6F2AD6436D6F1"> 
		<title>Marketing Cloud Visitor ID Service</title> 
		<p>This implementation process describes an Analytics deployment that
		  uses the 
		  <xref href="https://marketing.adobe.com/resources/help/en_US/mcvid/"
			format="http" scope="external">Marketing Cloud Visitor ID Service</xref>.
		  Before you implement the Visitor ID service, your company must be provisioned
		  for the Marketing Cloud. After your company is provisioned, you'll receive a
		  Marketing Cloud organization ID that must be provided during Visitor ID service
		  initialization. See 
		  <xref href="https://marketing.adobe.com/resources/help/en_US/mcloud/"
		  format="http" scope="external">Getting Started with Adobe Marketing
			 Cloud</xref>. 
		</p> 
	 </section> 
	 <section id="section_73961BAD5BB4430A95E073DE5C026277"> 
		<title>Implementation Steps</title> 
		<p>To successfully implement a page with code to collect data, you must
		  have access to your hosting servers to upload new content to your website. It
		  is also useful to have an existing site to implement code. 
		</p> 
		<p>The following steps walk you through a basic Analytics implementation.
		  
		</p> 
		<table id="table_1683413EA0E34DBC9291832647B68E96"> 
		  <tgroup cols="3"> 
			 <colspec colname="col01" colnum="1" colwidth="1.00*"/> 
			 <colspec colnum="2" colname="col1" colwidth="2.62*"/> 
			 <colspec colnum="3" colname="col2" colwidth="8.20*"/> 
			 <thead> 
				<row> 
				  <entry colname="col01">Step 
				  </entry> 
				  <entry colname="col1">Task 
				  </entry> 
				  <entry colname="col2">Description 
				  </entry> 
				</row> 
			 </thead> 
			 <tbody> 
				<row> 
				  <entry colname="col01"> 
					 <image href="graphics/step1_icon.png"
					 id="image_21F30BBFC0A249F8B0E1A50EBBEED77D"></image> 
				  </entry> 
				  <entry colname="col1">Download AppMeasurement for JavaScript and
					 the Visitor ID service. 
				  </entry> 
				  <entry colname="col2"> 
					 <p>The download is available in 
						<xref
						href="https://marketing.adobe.com/resources/help/en_US/reference/?f=code_manager_admin"
						format="http" scope="external">Code Manager</xref>. 
					 </p> 
					 <p>This download zip contains several files, for now we are
						concerned only with 
						<codeph>AppMeasurement.js</codeph> and 
						<codeph>VisitorAPI.js</codeph>. 
					 </p> 
				  </entry> 
				</row> 
				<row> 
				  <entry colname="col01"><image href="graphics/step2_icon.png"
					 id="image_02CFDC007BF1486AA312698EBFFA79F7"></image> 
				  </entry> 
				  <entry colname="col1">Configure the Visitor ID service. 
				  </entry> 
				  <entry colname="col2"> 
					 <p>In 
						<codeph>VisitorAPI.js</codeph>, add the following visitor ID
						initialization code at the beginning of the file: 
					 </p> 
					 <codeblock outputclass="syntax javascript">var visitor = new Visitor("INSERT-MCORG-ID-HERE");
visitor.trackingServer = "INSERT-TRACKING-SERVER-HERE"; // same as s.trackingServer
visitor.trackingServerSecure = "INSERT-SECURE-TRACKING-SERVER-HERE"; //same as s.trackingServerSecure
/*
 ============== DO NOT ALTER ANYTHING BELOW THIS LINE ! ============
</codeblock> 
					 <ul id="ul_769BA118CC244308A805079C2CBECC12"> 
						<li id="li_D366EBDE24CB433EA523DB228CB2FAF1"> 
						  <codeph>"INSERT-MCORG-ID-HERE"</codeph> - (Required) This
						  Adobe Marketing Cloud Organization ID is sent to your administrator when your
						  company is provisioned for the Adobe Marketing Cloud. 
						</li> 
						<li id="li_4F9704A6A6EA4334A3758F99B8D67C9D"> 
						  <codeph>"INSERT-TRACKING-SERVER-HERE"</codeph> - (Required)
						  Your Analytics tracking server. 
						</li> 
						<li id="li_C578420458D649228E54D9809AF62627"> 
						  <codeph>"INSERT-SECURE-TRACKING-SERVER-HERE"</codeph> -
						  (Required if ssl is enabled) Your Analytics secure tracking server. 
						</li> 
					 </ul> 
				  </entry> 
				</row> 
				<row> 
				  <entry colname="col01"><image href="graphics/step3_icon.png"
					 id="image_76B61DEABE3849CCB39135FDD7399EAA"></image> 
				  </entry> 
				  <entry colname="col1">Update 
					 <codeph>AppMeasurement.js</codeph>. 
				  </entry> 
				  <entry colname="col2"> 
					 <p>Copy the 
						<xref
						href="appmeasure_mjs_pagecode.xml#concept_15D57804F80C446E95F61210098541E4/section_4351543F2D6049218E18B48769D471E2"
						format="dita" scope="local"><?xm-replace_text Example AppMeasurement.js Code?></xref>
						and paste it at the beginning of your 
						<codeph>AppMeasurement.js</codeph> file. At a minimum, update
						the following variables: 
					 </p> 
					 <ul id="ul_62FA640BD2604E589650A92158272615"> 
						<li id="li_54E56B483B3A416EA27D7B540D60E39F"> 
						  <codeph>s.account="INSERT-RSID-HERE"</codeph> 
						</li> 
						<li id="li_00A958289BB045379B436F13287E03D5"> 
						  <codeph>s.trackingServer="INSERT-TRACKING-SERVER-HERE"</codeph>
						  
						</li> 
						<li id="li_C0779ADF780440ED876236AEB1FB5DCC"> 
						  <codeph>s.visitorNamespace =
							 "INSERT-NAMESPACE-HERE"</codeph> 
						</li> 
						<li id="li_93072B656C134D8C89195B7F2D7D8F05"> 
						  <codeph>s.visitor =
							 Visitor.getInstance("INSERT-NAMESPACE-HERE")</codeph> 
						</li> 
					 </ul> 
					 <p> See 
						<xref
						href="https://marketing.adobe.com/resources/kb/en_US/analytics/kb/determining-data-center.html"
						format="http" scope="external">Correctly populate the trackingServer and
						  trackingServerSecure variable</xref> or 
						<xref
						href="contact_and_legal.xml#concept_34A1CA16F2244D42930BB77846A5ABBB"
						format="dita" scope="local">contact Client Care</xref> if you are unsure about
						any of these values. If they are not set correctly, data will not be collected
						by your implementation.
					 </p> 
				  </entry> 
				</row> 
				<row> 
				  <entry colname="col01"> 
					 <image href="graphics/step4_icon.png"
					 id="image_B255E5EAE7BB43FC946D0E9DFCA83003"></image> 
				  </entry> 
				  <entry colname="col1">Host 
					 <codeph>AppMeasurement.js</codeph> and 
					 <codeph>VisitorAPI.js</codeph>. 
				  </entry> 
				  <entry colname="col2"> 
					 <p>These core JavaScript files must be hosted on a web server
						that is accessible to all pages on your site. You need the path to these files
						in the next step. 
					 </p> 
				  </entry> 
				</row> 
				<row> 
				  <entry colname="col01"> 
					 <image href="graphics/step5_icon.png"
					 id="image_844E896941E2489A943BE10AD710ED36"></image> 
				  </entry> 
				  <entry colname="col1">Reference 
					 <codeph>AppMeasurement.js</codeph> and 
					 <codeph>VisitorAPI.js</codeph> on all site pages. 
				  </entry> 
				  <entry colname="col2"> 
					 <p> Include the Visitor ID Service by adding the following line
						of code in the 
						<codeph>&lt;head&gt;</codeph> or &lt;body&gt; tag on each
						page. 
						<codeph>VisitorAPI.js</codeph> must be included before 
						<codeph>AppMeasurement.js</codeph>: 
					 </p> 
					 <codeblock outputclass="syntax html">&lt;script language="JavaScript" type="text/javascript" 
src="http://INSERT-DOMAIN-AND-PATH-TO-CODE-HERE/VisitorAPI.js"&gt;&lt;/script&gt;</codeblock> 
					 <p> Include AppMeasurement for JavaScript by adding the
						following line of code in the 
						<codeph>&lt;head&gt;</codeph> or 
						<codeph>&lt;body&gt;</codeph> tag on each page: 
					 </p> 
					 <codeblock outputclass="syntax html">&lt;script language="JavaScript" type="text/javascript" 
src="http://INSERT-DOMAIN-AND-PATH-TO-CODE-HERE/AppMeasurement.js"&gt;&lt;/script&gt;</codeblock> 
				  </entry> 
				</row> 
				<row> 
				  <entry colname="col01"> 
					 <image href="graphics/step6_icon.png"
					 id="image_1C4293CA98F04EE2ADA69EAB95BDE8B1"></image> 
				  </entry> 
				  <entry colname="col1">Update and deploy page code. 
				  </entry> 
				  <entry colname="col2"> 
					 <p>Copy the 
						<xref
						href="appmeasure_mjs_pagecode.xml#concept_15D57804F80C446E95F61210098541E4/section_042412C29CC249E298F19B2BC2F43CE7"
						format="dita" scope="local"><?xm-replace_text Example Page Code?></xref> and
						paste it just after the opening 
						<codeph>&lt;body&gt;</codeph> tag on each page you want to
						track. At a minimum, update the following variables: 
					 </p> 
					 <ul id="ul_29200A6E8DA14386BDA242AD8B270FEB"> 
						<li id="li_FB24D2CB9241401A83BD13EE342A7810"> 
						  <codeph>var s=s_gi("INSERT-RSID-HERE")</codeph> 
						</li> 
						<li id="li_463A35BA06CC4618B4AF17CD7E83AED5"> 
						  <codeph>s.pageName="INSERT-NAME-HERE" // for example,
							 s.pageName=document.title</codeph> 
						</li> 
					 </ul> 
				  </entry> 
				</row> 
				<row> 
				  <entry colname="col01"> 
					 <image href="graphics/step7_icon.png"
					 id="image_A423CBF386AF4E5986E8CBB6E31CD3E5"></image> 
				  </entry> 
				  <entry colname="col1">Use the DigitalPulse Debugger to verify
					 that data is being sent. 
				  </entry> 
				  <entry colname="col2"> 
					 <p>Install the 
						<xref
						href="debugger.xml#concept_B26FFE005EDD4E0FACB3117AE3E95AA2" format="dita"
						scope="local"><?xm-replace_text Adobe Debugger?></xref> bookmarklet. After it
						is installed, load a page where you have deployed page code and then open the
						debugger. The debugger displays details about the collection data that was
						sent. 
					 </p> 
				  </entry> 
				</row> 
			 </tbody> 
		  </tgroup> 
		</table> 
	 </section> 
	 <section id="section_4E2D1D962DF046418134C43CFC49AD4A"> 
		<title>Caching</title> 
		<p>The JavaScript file is cached in the visitor's browser after it is
		  initially loaded, and is typically downloaded no more than once per session.
		  The file is not downloaded on each page, even though it is used by every page
		  on the site. On most websites, users average more than a few page views per
		  session, so transferring JavaScript that is used multiple times into this file
		  can result in less overall downloaded data. 
		</p> 
	 </section> 
	 <section id="section_C10BBC84C81C414088F97363D29E021B"> 
		<title> JavaScript for AppMeasurement Compression </title> 
		<p>If you are concerned about page weight (size) of H Code
		  (AppMeasurement for JavaScript 1.0 is pre-compressed), Adobe recommends that
		  you consider compressing the file using GZIP. GZIP is supported by all major
		  browsers and offers better performance than JavaScript compression to compress
		  and decompress the core 
		  <filepath>s_code.js</filepath> JavaScript file. 
		</p> 
		<p>The following links help explain how you can use GZIP functionality on
		  your site to handle compression of the 
		  <filepath>s_code.js</filepath> JavaScript code: 
		</p> 
		<ul id="ul_9002D4E7086F4ADEBD60D0D3DB07741C"> 
		  <li id="li_8241E0A86A10432A9F84F9AEAD533F4C"> 
			 <xref href="http://httpd.apache.org/docs/2.0/mod/mod_deflate.html"
			  format="http" scope="external"> <?xm-replace_text http://httpd.apache.org/docs/2.0/mod/mod_deflate.html?>
			 </xref> 
		  </li> 
		  <li id="li_6C00DAE42FAE49B7A375988FEEF24709"> 
			 <xref
			  href="http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/25d2170b-09c0-45fd-8da4-898cf9a7d568.mspx?mfr=true"
			  format="http" scope="external"> <?xm-replace_text http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/25d2170b-09c0-45fd-8da4-898cf9a7d568.mspx?mfr=true?>
			 </xref> 
		  </li> 
		  <li id="li_1939D3EB2C5B46E0A11EFBD7C67BFC69"> 
			 <xref
			  href="http://www.cubicleman.com/2007/04/06/enabling-gzip-compression-with-tomcat-and-flex/"
			  format="http" scope="external"> <?xm-replace_text http://www.cubicleman.com/2007/04/06/enabling-gzip-compression-with-tomcat-and-flex/?>
			 </xref> 
		  </li> 
		</ul> 
	 </section> 
  </conbody> 
</concept> 
