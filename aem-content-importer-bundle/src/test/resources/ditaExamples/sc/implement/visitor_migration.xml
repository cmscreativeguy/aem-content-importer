<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE concept PUBLIC "-//OASIS//DTD DITA Concept//EN" "concept.dtd">
<concept id="concept_5A1BDA6848504084A1C47B61D91FC761"> 
  <title>Visitor Migration</title> 
  <shortdesc>Visitor migration is a process where the visitor ID cookie is
	 migrated from one domain to another. 
  </shortdesc> 
  <prolog> 
	 <metadata> 
		<othermeta content="Analytics" name="solution"/> </metadata>
  </prolog> 
  <conbody> 
	 <p>Visitor migration lets you preserve visitor identification cookies when
		changing data collection domains. Data collection domains might change for the
		following reasons: 
	 </p> 
	 <ul id="ul_1FF06E7C7A9641BD998E12B7942DE3A1"> 
		<li id="li_1AA78024167D488188E461322A50D795">Moving from 
		  <codeph>2o7.net</codeph> to 
		  <codeph>omtrdc.net</codeph> (<xref
		  href="https://marketing.adobe.com/resources/help/en_US/whitepapers/rdc/"
		  format="http" scope="external">Regional Data Collection</xref>). 
		</li> 
		<li id="li_865F2DE999B04DA5B3FD4E2BC99F732C">You are implementing the 
		  <xref href="https://marketing.adobe.com/resources/help/en_US/mcvid/"
			format="http" scope="external">Marketing Cloud Visitor ID Service</xref> and
		  are moving from a CNAME/first-party data collection domain to 
		  <codeph>2o7.net</codeph> or 
		  <codeph>omtrdc.net</codeph> (<xref
		  href="https://marketing.adobe.com/resources/help/en_US/whitepapers/rdc/"
		  format="http" scope="external">Regional Data Collection</xref>) 
		</li> 
		<li id="li_6C46E4651DC44FCB8173500C0C06CAF2">Moving from 
		  <codeph>2o7.net</codeph> or 
		  <codeph>omtrdc.net</codeph> to a cname/first-party data collection
		  (<xref
		  href="https://marketing.adobe.com/resources/help/en_US/whitepapers/first_party_cookies/"
		  format="http" scope="external">First-Party Cookies)</xref>. 
		</li> 
		<li id="li_B9D279B0176745F6969571824F8C03A1">Moving from one CNAME to
		  another (changing domains). 
		</li> 
	 </ul> 
	 <p>After visitor migration is configured, when a user visits the new domain
		without a visitor ID cookie, the server redirects to the previous data
		collection hostname, retrieves any available visitor ID cookies, and then
		redirects back to the new domain. If a Visitor ID is not found on the previous
		hostname, a new ID is generated. This occurs only once per visitor. 
	 </p> 
	 <section id="section_FF0C5C5CAEF343FFA1892B29311F7160"> 
		<title>Visitor Migration Process</title> 
		<p>The following table lists the tasks required for visitor migration: 
		</p> 
		<table id="table_7B2535FC3E264216A299686415C6B21C"> 
		  <tgroup cols="2"> 
			 <colspec colnum="1" colname="col1" colwidth="2.86*"/> 
			 <colspec colnum="2" colname="col3" colwidth="4.74*"/> 
			 <thead> 
				<row> 
				  <entry colname="col1">Task 
				  </entry> 
				  <entry colname="col3">Description 
				  </entry> 
				</row> 
			 </thead> 
			 <tbody> 
				<row> 
				  <entry colname="col1"> 
					 <p> 
						<b>To get started:</b> 
						<xref
						 href="http://helpx.adobe.com/marketing-cloud/contact-support.html"
						 format="http" scope="external">Contact Customer Care 
						</xref> with the domain(s) you want to migrate, and the
						migration period you would like to enable (30, 60, or 90 days). Make sure you
						include the non-secure and secure domains. 
					 </p> 
				  </entry> 
				  <entry colname="col3"> 
					 <p>Create a list with the 
						<i>exact</i> syntax for the domains you want to migrate to
						and migrate from. 
					 </p> 
					 <ul id="ul_067EC5C7619141A6BDFBC209C9FD47E2"> 
						<li
						 id="li_0723D948465A49C1871B81207AEDC4DC">example.112.2o7.net &gt;
						  metrics.example.com 
						</li> 
						<li
						 id="li_B0CA15A593BD4AB9802E33A3FF037C7A">example.102.112.2o7.net &gt;
						  smetrics.example.com 
						</li> 
					 </ul> 
					 <p>The migration host names are configured on Adobe Data
						collection server. Customer Care will let you know when the change is made so
						you can plan for the next step. 
					 </p> 
				  </entry> 
				</row> 
				<row> 
				  <entry colname="col1"> 
					 <p> 
						<b>6+ hours after configuration change</b>: Update the 
						<codeph>s.trackingServer</codeph> and 
						<codeph>s.trackingServerSecure</codeph> variables in your
						Analytics JavaScript code to use the new data collection servers. 
					 </p> 
				  </entry> 
				  <entry colname="col3"> 
					 <p>After you make this change, use a 
						<xref
						 href="packet_monitor.xml#concept_490DF35E06D44234A91B5FC57C0BF258"
						 format="dita" scope="local">Packet Analyzer</xref> to verify that the Analtyics
						image request is going to the updated data collection server. 
					 </p> 
				  </entry> 
				</row> 
				<row> 
				  <entry colname="col1"> 
					 <p> 
						<b>Immediately after updating your Analytics code</b>: Test
						your site to verify that the redirect to the previous data collection domain is
						occurring. 
					 </p> 
				  </entry> 
				  <entry colname="col3"> 
					 <p>Use a 
						<xref
						 href="packet_monitor.xml#concept_490DF35E06D44234A91B5FC57C0BF258"
						 format="dita" scope="local">Packet Analyzer</xref> to verify that when you
						access your site for the first time, or after clearing cookies, you see three
						302 (redirect) HTTP status codes before the 200 (OK) HTTP status code. If any
						of these redirects fail, contact Customer Care immediately to ensure that the
						migration is configured correctly. 
					 </p> 
				  </entry> 
				</row> 
				<row> 
				  <entry colname="col1"> 
					 <p> 
						<b>For the entire migration period</b>: Keep the DNS record
						for the previous hostname active. 
					 </p> 
				  </entry> 
				  <entry colname="col3"> 
					 <p>The previous hostname must resolve through DNS or the cookie
						migration will not occur. 
					 </p> 
				  </entry> 
				</row> 
			 </tbody> 
		  </tgroup> 
		</table> 
	 </section> 
	 <section id="section_32FCEE2575944D039EA0FEBFB5814259"> 
		<title>Deprecated visitorMigrationKey and visitorMigrationServer
		  Variables </title> 
		<p>As of March 2013, the 
		  <codeph>visitorMigrationKey</codeph>, 
		  <codeph>visitorMigrationServer</codeph>, and 
		  <codeph>visitorMigrationServerSecure</codeph> data collection variables
		  are deprecated and no longer used. The data previously contained in these
		  variables are now stored on Adobe servers for increased security. 
		</p> 
	 </section> 
  </conbody> 
</concept> 
