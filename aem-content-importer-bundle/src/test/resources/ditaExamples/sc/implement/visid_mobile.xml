<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE concept PUBLIC "-//OASIS//DTD DITA Concept//EN" "concept.dtd"[]>
<concept id="concept_8C5557634014440AA3588FBB0CF6BB49">
  <title>Identifying Mobile Devices</title>
  <shortdesc>Most mobile devices accept browser cookies. However, in cases when
	 devices do not accept cookies, another method is used to uniquely identify
	 wireless devices. 
  </shortdesc>
  <prolog>
    <metadata>
      <othermeta name="solution" content="Analytics" />
      <othermeta name="topic" content="Developer and implementation" />
    </metadata>
  </prolog>
  <conbody>
    <p>Adobe has identified a number of HTTP 
		<xref href="visid_mobile.xml#concept_8C5557634014440AA3588FBB0CF6BB49/section_60D6EAC0D16945A89DD5A7ADF3B8298D" format="dita" scope="local">subscriber ID headers</xref> that uniquely identify
		a majority of mobile devices. Those headers often include the device phone
		number (or a hashed version of the number), or other identifiers. The majority
		of current devices have one or more of the headers that uniquely identify the
		device, and all Adobe data collection servers automatically use those headers
		in place of a Visitor ID. 
	 </p>
    <p> In a typical image request, a '1' in the path
		(<codeph>/b/ss/rsid/1</codeph>) causes Adobe servers to return a gif image and
		to attempt to set a persistent 
		<wintitle>visitor ID</wintitle> cookie (<codeph>AMCV_</codeph> or 
		<codeph>s_vi</codeph>). However, if the device is recognized as a mobile
		device based on the HTTP headers, a '5' is passed in place of the '1', which
		indicates that a wbmp format image should be returned and that our list of
		recognized wireless headers (not a cookie) should be used to identify the
		device. 
	 </p>
    <p>The following table lists out the order of the ID methods used based on
		the return image type value ('1' or '5') in the path: 
	 </p>
    <table id="table_07B0E55D5DAA4552A5CBC6937D47A857">
      <tgroup cols="2">
        <colspec colnum="1" colname="col1" colwidth="1.00*" />
        <colspec colnum="2" colname="col2" colwidth="5.89*" />
        <thead>
          <row>
            <entry colname="col1">Setting 
				</entry>
            <entry colname="col2">ID method order 
				</entry>
          </row>
        </thead>
        <tbody>
          <row>
            <entry colname="col1">
              <codeph>/1/</codeph>
            </entry>
            <entry colname="col2">
              <p>Default:
				  </p>
              <ul id="ul_E37E9919658A492C92187BAA18D33AB6">
                <li id="li_1A9E39C7CFB24C68AA07C8E85D33A858">Custom visitor ID 
					 </li>
                <li id="li_0DC8D17828C848BEB614C6E47C090064">Cookie 
					 </li>
                <li id="li_52706792FAD14F459266E3A672F92EA1">Subscriber ID
						Header 
					 </li>
                <li id="li_ECAD713D22314338BB5C92167DC0BB02"> IP
						Address-UserAgent-Gateway IP Address 
					 </li>
              </ul>
            </entry>
          </row>
          <row>
            <entry colname="col1">
              <codeph>/5/ /5.1/ /5.5/</codeph>
            </entry>
            <entry colname="col2">
              <p>Device was identified as a wireless device, or 
					 <codeph>/5/</codeph> was manually sent in the image request:
				  </p>
              <ul id="ul_624BEDFA3E1243CF9B42081D8B8EFFFB">
                <li id="li_D65761D23B684DB59BC23E92C9098122">Custom visitor ID 
					 </li>
                <li id="li_ADBA806B74CA43EFA8612301E06106C6">Subscriber ID
						Header 
					 </li>
                <li id="li_79DFD0DEAA1242C09A03E8134A40F799">Cookie 
					 </li>
                <li id="li_A462B9120FC6443480D62F37D456747E">IP Address-User
						Agent-Gateway IP Address 
					 </li>
              </ul>
            </entry>
          </row>
        </tbody>
      </tgroup>
    </table>
    <p> You can also pass a '1' or a '5' in manual image requests, but be aware
		that these codes are mutually-exclusive, therefore always passing '5' does not
		leverage a cookie when it is supported. You can incorporate your own mechanism
		to determine if a device supports cookies, and if so, pass a '1' in the image
		rather than a '5'. The accuracy improvement in this situation is limited to the
		number of mobile devices supporting cookies. 
	 </p>
    <section id="section_60D6EAC0D16945A89DD5A7ADF3B8298D">
      <title> Subscriber ID Headers</title>
      <p>The subscriber ID method is generally more reliable than a cookie for
		  user identification because of cookie deletion, cookie acceptance issues, and
		  gateway cookie management issues. 
		</p>
      <p> You can improve changes of identifying a visitor by being added to
		  the white list for the carrier that your mobile visitors use. To get access to
		  the carrier's visitor ID, contact the carrier to add your domain to their white
		  list. If you are on a carrier's white list, you also have access to subscriber
		  ID headers that you may not otherwise be able to access. 
		</p>
      <p> The following list of headers is used to identify wireless devices.
		  The algorithm for processing the headers is to 
		</p>
      <ol id="ol_2BF0B982497E4321A525D3A384A3104A">
        <li id="li_5E916B3DE55A44B9BF612B3D4652AC83">extract the HTTP header
			 key (the name of the header, such as,"X-Up-Calling-Line-ID") 
		  </li>
        <li id="li_050F2ED844F04A8AB58537FB716C5198">trim out all non alpha
			 (A-Z and a-z) characters 
		  </li>
        <li id="li_00D4657D49274B118578463559FE9F21">convert the header key to
			 lowercase 
		  </li>
        <li id="li_DEFF465A91A147BB86245B9265CB4DA3">compare the end of the key
			 to the ones in the following table to find a match:
		  </li>
      </ol>
      <table id="table_4E54AAF64C65492C84E75665AB2913A8">
        <tgroup cols="3">
          <colspec colnum="1" colname="col1" colwidth="1.00*" />
          <colspec colnum="2" colname="col2" colwidth="1.04*" />
          <colspec colnum="3" colname="col3" colwidth="2.66*" />
          <thead>
            <row>
              <entry> Header 
				  </entry>
              <entry> Type 
				  </entry>
              <entry> Example 
				  </entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry> callinglineid 
				  </entry>
              <entry> ID 
				  </entry>
              <entry> X-Up-Calling-Line-ID: 8613802423312 
				  </entry>
            </row>
            <row>
              <entry> subno 
				  </entry>
              <entry> ID 
				  </entry>
              <entry> x-up-subno: swm_10448371100_vmag.mycingular.net 
				  </entry>
            </row>
            <row>
              <entry> clientid 
				  </entry>
              <entry> ID 
				  </entry>
              <entry> ClientID: eGtUpsqEO19zVHmbOkgaPVI-@sprintpcs.com 
				  </entry>
            </row>
            <row>
              <entry> uid 
				  </entry>
              <entry> ID 
				  </entry>
              <entry> x-jphone-uid: a2V4Uh21XQH9ECNN 
				  </entry>
            </row>
            <row>
              <entry> clid 
				  </entry>
              <entry> ID 
				  </entry>
              <entry> X-Hts_clid: 595961714786 
				  </entry>
            </row>
            <row>
              <entry> deviceid 
				  </entry>
              <entry> ID 
				  </entry>
              <entry> rim-device-id: 200522ae 
				  </entry>
            </row>
            <row>
              <entry> forwardedfor 
				  </entry>
              <entry> ID or IP Address 
				  </entry>
              <entry> X-Forwarded-For: 127.0.0.1 
				  </entry>
            </row>
            <row>
              <entry> msisdn 
				  </entry>
              <entry> ID or IP Address 
				  </entry>
              <entry> X-Wap-msisdn: 8032618185 
				  </entry>
            </row>
            <row>
              <entry> clientip 
				  </entry>
              <entry> IP Address 
				  </entry>
              <entry> Client-ip: 10.9.41.2 
				  </entry>
            </row>
            <row>
              <entry> wapipaddr 
				  </entry>
              <entry> IP Address 
				  </entry>
              <entry> X-WAPIPADDR: 10.48.213.162 
				  </entry>
            </row>
            <row>
              <entry> huaweinasip 
				  </entry>
              <entry> IP Address 
				  </entry>
              <entry> x-huawei-NASIP: 211.139.172.70 
				  </entry>
            </row>
            <row>
              <entry> userip 
				  </entry>
              <entry> IP Address 
				  </entry>
              <entry> UserIP: 70.214.81.241 
				  </entry>
            </row>
            <row>
              <entry> ipaddress 
				  </entry>
              <entry> IP Address 
				  </entry>
              <entry> X-Nokia-ipaddress: 212.97.227.125 
				  </entry>
            </row>
            <row>
              <entry> subscriberinfo 
				  </entry>
              <entry> IP Address 
				  </entry>
              <entry> X-SUBSCRIBER-INFO: IP=10.103.132.128 
				  </entry>
            </row>
          </tbody>
        </tgroup>
      </table>
      <p>For example "callinglineid" would match "X-Up-Calling-Line-ID" and
		  "nokia-callinglineid." The header type tells us what to expect in the header.
		  The order of header priority is listed here (if a "callinglineid" header is
		  present it is used instead of "subno"). 
		</p>
      <p>You can use 
		  <xref href="dynvars_overview.xml#concept_B016789733A94070A9EAB209EEC05262" format="dita" scope="local"><?xm-replace_text Dynamic Variables?></xref> to
		  extract specific values from a header. 
		</p>
    </section>
  </conbody>
</concept>